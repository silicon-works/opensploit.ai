# CLI Reference

OpenSploit provides both an interactive TUI and command-line options for automation and scripting.

---

## Overview

When run without arguments, OpenSploit launches the TUI. For non-interactive use, pass commands directly.

```bash
opensploit              # Start TUI
opensploit run "..."    # Run non-interactive
opensploit serve        # Start API server
```

---

## Core Commands

### tui

Start the terminal user interface.

```bash
opensploit tui [directory]
```

| Flag | Description |
|------|-------------|
| `--continue`, `-c` | Resume last session |
| `--session`, `-s` | Resume specific session |
| `--prompt` | Start with initial prompt |
| `--model`, `-m` | Use specific model |
| `--agent` | Use specific agent |
| `--port` | Backend server port |
| `--hostname` | Backend server hostname |

### run

Run OpenSploit non-interactively with a prompt.

```bash
opensploit run "<prompt>"
opensploit run --file targets.txt "Scan all targets"
```

| Flag | Description |
|------|-------------|
| `--command` | Execute as shell command |
| `--continue`, `-c` | Continue last session |
| `--session`, `-s` | Continue specific session |
| `--share` | Share session when complete |
| `--model`, `-m` | Use specific model |
| `--agent` | Use specific agent |
| `--file`, `-f` | Include file content |
| `--format` | Output format (text, json) |
| `--title` | Session title |
| `--attach` | Attach to running server |
| `--port` | Server port |

<Tip>
Use `--format json` for machine-parseable output in CI/CD pipelines.
</Tip>

### serve

Start a headless HTTP server for API access.

```bash
opensploit serve
```

| Flag | Description |
|------|-------------|
| `--port` | Server port (default: 9321) |
| `--hostname` | Server hostname |
| `--mdns` | Enable mDNS discovery |
| `--cors` | CORS allowed origins |

### web

Start headless server with web interface.

```bash
opensploit web
```

| Flag | Description |
|------|-------------|
| `--port` | Server port |
| `--hostname` | Server hostname |
| `--mdns` | Enable mDNS discovery |
| `--cors` | CORS allowed origins |

### attach

Connect TUI to a running backend server.

```bash
opensploit attach
```

| Flag | Description |
|------|-------------|
| `--dir` | Working directory |
| `--session`, `-s` | Session to resume |

---

## Agent Commands

### agent create

Create a new agent with custom configuration.

```bash
opensploit agent create
```

### agent list

Display all available agents.

```bash
opensploit agent list
```

---

## Authentication

### auth login

Configure API keys for providers.

```bash
opensploit auth login
```

### auth list

Show authenticated providers.

```bash
opensploit auth list
opensploit auth ls
```

### auth logout

Clear provider credentials.

```bash
opensploit auth logout [provider]
```

---

## Model Commands

### models

List available models.

```bash
opensploit models
opensploit models anthropic
```

| Flag | Description |
|------|-------------|
| `--refresh` | Refresh model list |
| `--verbose` | Show detailed info |

---

## Session Commands

### session list

Display all sessions.

```bash
opensploit session list
```

| Flag | Description |
|------|-------------|
| `--max-count`, `-n` | Limit results |
| `--format` | Output format |

### export

Export session as JSON.

```bash
opensploit export <sessionID>
```

### import

Import session from file or share URL.

```bash
opensploit import <file>
opensploit import https://opensploit.ai/share/abc123
```

---

## MCP Commands

### mcp add

Add an MCP server.

```bash
opensploit mcp add <name> <command>
```

### mcp list

List configured MCP servers.

```bash
opensploit mcp list
```

### mcp auth

Authenticate with MCP server.

```bash
opensploit mcp auth <name>
```

### mcp logout

Remove MCP server authentication.

```bash
opensploit mcp logout <name>
```

### mcp debug

Debug MCP server connection.

```bash
opensploit mcp debug <name>
```

---

## Statistics

### stats

Show token usage and costs.

```bash
opensploit stats
```

| Flag | Description |
|------|-------------|
| `--days` | Time period (default: 30) |
| `--tools` | Show tool usage |
| `--models` | Show model breakdown |
| `--project` | Filter by project |

---

## System Commands

### upgrade

Update to latest or specific version.

```bash
opensploit upgrade
opensploit upgrade 1.2.3
```

| Flag | Description |
|------|-------------|
| `--method`, `-m` | Update method |

### uninstall

Remove OpenSploit.

```bash
opensploit uninstall
```

| Flag | Description |
|------|-------------|
| `--keep-config`, `-c` | Keep config files |
| `--keep-data`, `-d` | Keep data files |
| `--dry-run` | Preview removal |
| `--force`, `-f` | Skip confirmation |

<Warning>
Uninstall removes all OpenSploit files. Use `--keep-data` to preserve session history.
</Warning>

---

## Global Flags

These flags work with any command.

| Flag | Description |
|------|-------------|
| `--help`, `-h` | Show help |
| `--version`, `-v` | Show version |
| `--print-logs` | Print debug logs |
| `--log-level` | Set log verbosity |

---

## Environment Variables

| Variable | Description |
|----------|-------------|
| `OPENSPLOIT_CONFIG` | Config file path |
| `OPENSPLOIT_CONFIG_CONTENT` | Inline config JSON |
| `OPENSPLOIT_DISABLE_AUTOUPDATE` | Disable update checks |
| `OPENSPLOIT_ENABLE_EXPERIMENTAL` | Enable experimental features |

**Provider API Keys:**

| Variable | Provider |
|----------|----------|
| `ANTHROPIC_API_KEY` | Anthropic |
| `OPENAI_API_KEY` | OpenAI |
| `GOOGLE_API_KEY` | Google |
| `GROQ_API_KEY` | Groq |
| `TOGETHER_API_KEY` | Together AI |
| `MISTRAL_API_KEY` | Mistral |

---

## Examples

### Non-interactive scan

```bash
opensploit run "Scan 10.10.10.1 for open ports and services"
```

### Resume and continue

```bash
opensploit --continue
```

### CI/CD integration

```bash
opensploit run \
  --format json \
  --model anthropic/claude-sonnet-4-5 \
  "Security audit of the codebase" \
  > audit.json
```

### Start API server

```bash
opensploit serve --port 8080 --cors "http://localhost:3000"
```

### Export session

```bash
opensploit export abc123 > session.json
```
